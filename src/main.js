// ========================
// üîπ 1. –ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
// ========================

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –≥–ª–∞–≤–Ω—ã–π SCSS-—Ñ–∞–π–ª —Å–æ —Å—Ç–∏–ª—è–º–∏ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
import "./styles/main.scss";

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∞–π—Ç–∞ (–∫–∞–∂–¥—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π DOM-—ç–ª–µ–º–µ–Ω—Ç)
import Nav from "./components/Nav/Nav.js";
import Header from "./components/Header/Header.js";
import Main from "./components/Main/Main.js";
import Footer from "./components/Footer/Footer.js";

// ========================
// üîπ 2. –ò–º–ø–æ—Ä—Ç –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è GSAP-–ø–ª–∞–≥–∏–Ω–æ–≤
// ========================

// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É GSAP (–∞–Ω–∏–º–∞—Ü–∏–∏)
import { gsap } from "gsap";
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω ScrollTrigger (–∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ)
import { ScrollTrigger } from "gsap/ScrollTrigger";
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω ScrollSmoother (–ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã)
import { ScrollSmoother } from "gsap/ScrollSmoother";

// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø–ª–∞–≥–∏–Ω—ã, —á—Ç–æ–±—ã GSAP –º–æ–≥ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

// ========================
// üîπ 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// ========================

// –ù–∞—Ö–æ–¥–∏–º –≤ index.html –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å id="app"
// <div id="app"></div> ‚Äî —ç—Ç–æ –∫–æ—Ä–Ω–µ–≤–æ–π —É–∑–µ–ª, –∫—É–¥–∞ –±—É–¥–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–µ—Å—å —Å–∞–π—Ç
const app = document.querySelector("#app");

// –û—á–∏—â–∞–µ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ Vite –≤—Å—Ç–∞–≤–∏–ª —á—Ç–æ-—Ç–æ –ø—Ä–∏ HMR (–≥–æ—Ä—è—á–µ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ)
app.innerHTML = "";

// ========================
// üîπ 4. –°–æ–∑–¥–∞—ë–º HTML-—Å—Ç—Ä—É–∫—Ç—É—Ä—É wrapper > content > (Nav, Header, Main, Footer)
// ========================

// –°–æ–∑–¥–∞—ë–º –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä .wrapper ‚Äî –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã ScrollSmoother
const wrapper = document.createElement("div");
wrapper.className = "wrapper";

// –í–Ω—É—Ç—Ä–∏ .wrapper –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è .content ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
const content = document.createElement("div");
content.className = "content";

// –î–æ–±–∞–≤–ª—è–µ–º –≤ .content –≤—Å–µ –Ω–∞—à–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML-–±–ª–æ–∫)
content.append(
  Nav(),    // –ù–∞–≤–∏–≥–∞—Ü–∏—è (–≤–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é)
  Header(), // –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ (–±–∞–Ω–Ω–µ—Ä/–∑–∞–≥–æ–ª–æ–≤–æ–∫)
  Main(),   // –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
  Footer()  // –ü–æ–¥–≤–∞–ª —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ –∫–∞—Ä—Ç–æ–π
);

// –î–æ–±–∞–≤–ª—è–µ–º .content –≤–Ω—É—Ç—Ä—å .wrapper
wrapper.appendChild(content);

// –í—Å—Ç–∞–≤–ª—è–µ–º –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É wrapper ‚Üí content ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä—å #app
// (–≤ body –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –≤—Å—Ç–∞–≤–ª—è–µ–º ‚Äî ScrollSmoother —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–º–µ–Ω–Ω–æ —Å wrapper)
app.appendChild(wrapper);

// ========================
// üîπ 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ScrollSmoother (–ø–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞)
// ========================

// –°–æ–∑–¥–∞—ë–º –ø–ª–∞–≤–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É —Å –ø–æ–º–æ—â—å—é ScrollSmoother
ScrollSmoother.create({
  wrapper: ".wrapper",   // –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ
  content: ".content",   // –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–ª–∞–≤–Ω–æ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—Ç—å—Å—è
  smooth: 1.3,           // —Å—Ç–µ–ø–µ–Ω—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º ¬´—Ç—è–∂–µ–ª–µ–µ¬ª –ø—Ä–æ–∫—Ä—É—Ç–∫–∞)
  effects: true,         // –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ñ—Ñ–µ–∫—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º
});

// ========================
// üîπ 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è —Å–µ–∫—Ü–∏–π –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
// ========================

// –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
// (.content section) ‚Äî —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ü–µ–ø–∏—Ç—å —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
const sections = gsap.utils.toArray(".content section");

// –ó–∞–¥–∞—ë–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π (–æ–Ω–∏ –±—É–¥—É—Ç –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ –∏ —á—É—Ç—å —Å–º–µ—â—ë–Ω–Ω—ã–º–∏ –≤–Ω–∏–∑)
gsap.set(sections, { opacity: 0, y: 60 });

// –î–ª—è –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—ë–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
sections.forEach((section) => {
  gsap.to(section, {
    // –ö–æ–Ω–µ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∫—É–¥–∞ –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏–≤–µ–¥—ë—Ç)
    opacity: 1,
    y: 0,

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–º–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
    duration: 0.9,          // –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    ease: "power2.out",     // —Ç–∏–ø –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ/–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ)

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ScrollTrigger (–∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é)
    scrollTrigger: {
      trigger: section,     // —ç–ª–µ–º–µ–Ω—Ç, –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–Ω–∏–º–∞—Ü–∏—è
      start: "top 98%",     // –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞ ‚Äî –∫–æ–≥–¥–∞ –≤–µ—Ä—Ö —Å–µ–∫—Ü–∏–∏ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç 85% –≤—ã—Å–æ—Ç—ã –æ–∫–Ω–∞
      toggleActions: "play none none reverse",
      // —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ:
      // play    ‚Üí –∫–æ–≥–¥–∞ –¥–æ—Å–∫—Ä–æ–ª–ª–∏–ª–∏ –¥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ ‚Äî –ø—Ä–æ–∏–≥—Ä–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
      // none    ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –≤–Ω–∏–∑
      // none    ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ
      // reverse ‚Üí –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–≤–µ—Ä—Ö ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
    },
  });
});

// ========================
// üîπ 7. –ü–µ—Ä–µ—Å—á—ë—Ç –≤—Å–µ—Ö ScrollTrigger –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// ========================

// –ö–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã, –∫–∞—Ä—Ç–∞ –Ø–Ω–¥–µ–∫—Å–∞ –∏ —Ç.–ø. ‚Äî –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–µ–Ω—è–µ—Ç—Å—è.
// –≠—Ç–æ—Ç –≤—ã–∑–æ–≤ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, —á—Ç–æ–±—ã –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
window.addEventListener("load", () => {
  ScrollTrigger.refresh();
});
